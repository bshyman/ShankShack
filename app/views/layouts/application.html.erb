<!DOCTYPE html>
<html>
  <head>
    <title>Schnorrcard</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;500;700;900&display=swap" rel="stylesheet"/>

    <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_pack_tag 'application', 'data-turbolinks-track': 'reload' %>
    <%= stylesheet_pack_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
  </head>

  <body>
  <div class="flex flex-no-wrap">
    <div onclick="openSidebar(false)"
         class="flex items-center justify-center rounded-r-md bg-gray-800 text-gray-300 ml-0 cursor-pointer absolute inset-0 mt-10 m-auto w-8 h-8">
      <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-right" width="28" height="28"
           viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round"
           stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z"/>
        <polyline points="9 6 15 12 9 18"/>
      </svg>
    </div>
    <%= render partial: 'sidebar' %>
    <%= render partial: 'header' %>
    <%= yield %>
  </div>
  </body>
</html>

<script type="text/javascript" charset="utf-8">
  // Inbox script starts
  let elements = document.querySelectorAll("[data-menu]");
  for (let i = 0; i < elements.length; i++) {
    let main = elements[i];
    main.addEventListener("click", function () {
      let element = main.parentElement.parentElement;
      let andicators = main.querySelectorAll("svg");
      let child = element.querySelector("ul");
      child.classList.toggle("hidden");
      if (child.classList[1] !== "hidden") {
        andicators[1].style.display = "block";
        andicators[0].style.display = "none";
      } else {
        andicators[1].style.display = "none";
        andicators[0].style.display = "block";
      }
    });
  }
  //Inbox script ends

  // Notebook script starts
  function dropdownFunction(element) {
    var dropdowns = document.getElementsByClassName("dropdown-content");
    var i;
    let list = element.parentElement.parentElement.getElementsByClassName("dropdown-content")[0];
    for (i = 0; i < dropdowns.length; i++) {
      dropdowns[i].classList.add("hidden");
    }
    list.classList.toggle("hidden");
  }

  window.onclick = function (event) {
    if (!event.target.matches(".dropbtn")) {
      var dropdowns = document.getElementsByClassName("dropdown-content");
      var i;
      for (i = 0; i < dropdowns.length; i++) {
        var openDropdown = dropdowns[i];
        openDropdown.classList.add("hidden");
      }
    }
  };
  let flag = true;

  function checkAll() {
    if (flag) {
      document.querySelectorAll('input[type="checkbox"]').forEach((el) => {
        el.nextElementSibling.classList.remove("hidden");
      });
      flag = false;
    } else {
      document.querySelectorAll('input[type="checkbox"]').forEach((el) => {
        el.nextElementSibling.classList.add("hidden");
      });
      flag = true;
    }
  }

  // Reroute
  goToNotes = () => {
    window.location.href = "./notes.html";
  };
  goToTodos = () => {
    window.location.href = "app/views/layouts/todos.html.erb";
  };
  // Notebook script ends
  openSidebar = (flag) => {
    let sidebar = document.getElementById("sidebar");
    flag ? sidebar.classList.add("hidden") : sidebar.classList.remove("hidden");
  };
  //popup

  const Popup = (flag) => {
    if (flag) {
      document.getElementById("popup").classList.add("right-100");
      document.getElementById("popup").classList.remove("hidden");
    } else {
      document.getElementById("popup").classList.add("hidden");
    }
  };
  const Popup_review = (flag) => {
    if (flag) {
      document.getElementById("popup").classList.add("hidden");
      document.getElementById("popup_review").classList.remove("hidden");
    } else {
      document.getElementById("popup_review").classList.add("hidden");
    }
  };

  const selection = (flag) => {
    if (flag) {
      document.getElementById("check").classList.add("md:flex");
      document.getElementById("check").classList.remove("hidden");
    } else {
      document.getElementById("check").classList.remove("md:flex");
      document.getElementById("check").classList.add("hidden");
    }
  };

</script>
